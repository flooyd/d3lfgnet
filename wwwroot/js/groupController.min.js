(function(){function chatController($scope){$scope.showChat=!1;$scope.hello=function(){$scope.showChat=!0}}function groupController($http,$scope,$timeout){function addGroupFromServer(group){$scope.$apply(function(){vm.groups.unshift(group);$timeout(function(){var firstRow=$(".groupRow").first();$(firstRow).addClass("newGroupBorder");setTimeout(function(){firstRow.css({"background-color":"#272b30",transition:"background-color 1500ms ease-in"})},200)},0)})}function editOrRefreshGroupFromServer(group){vm.groups=vm.groups.filter(function(existingGroup){return existingGroup.battleTag!=group.battleTag});vm.groups.unshift(group)}var vm=this,postGroup;vm.groups=[];vm.showDifficulty=!0;vm.greaterRift=!1;vm.battletag="a";vm.groupCreated=!1;vm.newGroup={activity:"Rifts",paragon:"0",difficulty:"Torment XI",description:"",grLevel:"",region:"North America",battleTag:"Rahl#1739"};$http.get("/api/groups").then(function(response){angular.copy(response.data,vm.groups);console.log(response.data);$("#logoutButton").length&&$http.get("/api/groups/getusergroup").then(function(response){console.log("xd");vm.groups.unshift(response.data)},function(){console.log("error")})});vm.activityChanged=function(){changeDifficulty()};vm.addGroup=function(){makeDescriptionNonEmpty();postGroup().then(function(){vm.groupCreated=!0})};postGroup=function(){return $http.post("/api/groups",vm.newGroup)};vm.editGroup=function(){return vm.newGroup.Id=21359,$http.post("/api/groups/edit",vm.newGroup)};var changeDifficulty=function(){vm.newGroup.activity==="Greater Rifts"?(vm.newGroup.grLevel="51-55",vm.newGroup.difficulty="",vm.showDifficulty=!1,vm.greaterRift=!0):(vm.newGroup.difficulty="Torment XI",vm.newGroup.grLevel="",vm.showDifficulty=!0,vm.greaterRift=!1);vm.newGroup.activity==="Power Leveling"&&(vm.newGroup.difficulty="Torment VI")},makeDescriptionNonEmpty=function(){vm.newGroup.description===""&&(vm.newGroup.description="Slaying demons and such.")},hub=$.connection.groupHub;console.log($.connection.publishGroup);hub.client.publishGroup=addGroupFromServer;hub.client.editGroup=editOrRefreshGroupFromServer;$.connection.hub.logging=!0;$.connection.hub.start()}var app=angular.module("app");app.controller("groupController",groupController);app.controller("chatController",chatController)})();